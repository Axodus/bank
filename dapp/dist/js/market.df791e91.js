(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["market"],{e88b:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h1",[t._v("Market "+t._s(t.tokenSymbol))]),t.isOwner?[r("price",{attrs:{marketAddress:t.id,price:Number(t.price)}})]:[r("v-card",{staticClass:"ma-5",attrs:{"max-width":"80%",dark:""}},[r("v-card-text",[r("v-row",{attrs:{align:"center"}},[r("v-col",{staticClass:"display-0"},[t._v("Asset")])],1),r("v-row",{attrs:{align:"center"}},[r("v-col",{staticClass:"display-2",attrs:{cols:"6"}},[t._v(t._s(t.tokenSymbol))]),r("v-col",{attrs:{cols:"6"}},[r("v-img",{attrs:{src:t.btc,width:"70"}})],1)],1),r("v-row",{attrs:{align:"center"}},[r("v-col",{staticClass:"display-0",attrs:{cols:"3"}},[t._v("Total supply")]),r("v-col",{staticClass:"display-0",attrs:{cols:"3"}},[t._v("Total borrows")]),r("v-col",{staticClass:"display-0",attrs:{cols:"3"}},[t._v("Price")]),r("v-col",{staticClass:"display-0",attrs:{cols:"3"}},[t._v("Base borrow rate")])],1),r("v-row",{attrs:{align:"center"}},[r("v-col",{staticClass:"display-1",attrs:{cols:"3"}},[t._v(t._s(t.totalSupply))]),r("v-col",{staticClass:"display-1",attrs:{cols:"3"}},[t._v(t._s(t.totalBorrows))]),r("v-col",{staticClass:"display-1",attrs:{cols:"3"}},[t._v(t._s(t.price))]),r("v-col",{staticClass:"display-1",attrs:{cols:"3"}},[t._v(t._s(t.baseBorrowRate)+"%")])],1)],1)],1),r("v-card",{staticClass:"ma-5",attrs:{"max-width":"80%"}},[r("v-card-text",[r("p",{staticClass:"display-1 text--primary"},[t._v(" Balance ")]),r("v-row",{attrs:{align:"center"}},[r("v-col",{staticClass:"display-0 text-center",attrs:{cols:"4"}},[t._v(t._s(t.tokenSymbol)+" balance")]),r("v-col",{staticClass:"display-0 text-center",attrs:{cols:"4"}},[t._v("Supplied")]),r("v-col",{staticClass:"display-0 text-center",attrs:{cols:"4"}},[t._v("Borrowed")])],1),r("v-row",{attrs:{align:"center"}},[r("v-col",{staticClass:"display-1 text-center",attrs:{cols:"4"}},[t._v(t._s(t.tokenBalanceOf))]),r("v-col",{staticClass:"display-1 text-center",attrs:{cols:"4"}},[t._v(t._s(t.supplyOf))]),r("v-col",{staticClass:"display-1 text-center",attrs:{cols:"4"}},[t._v(t._s(t.borrowBy))])],1)],1),r("v-card-actions",{staticClass:"d-flex justify-space-around"},[r("v-btn",{staticClass:"my-2",attrs:{"x-large":"",raise:"",color:"green",dark:""},on:{click:t.showSupplyForm}},[t._v(" Supply ")]),r("v-btn",{staticClass:"my-2",attrs:{"x-large":"",depressed:"",color:"blue",dark:""},on:{click:t.showBorrowForm}},[t._v(" Borrow ")]),r("v-btn",{staticClass:"my-2",attrs:{"x-large":"",depressed:"",color:"teal",dark:""},on:{click:t.showRedeemForm}},[t._v(" Redeem ")]),r("v-btn",{staticClass:"my-2",attrs:{"x-large":"",depressed:"",color:"indigo lighten-1",dark:""},on:{click:t.showPayBorrowForm}},[t._v(" Pay debt ")])],1)],1)],r(t.actionForm,{tag:"component",attrs:{marketAddress:t.id},on:{formSucceed:t.reset}})],2)},n=[],o=(r("d3b7"),r("3ca3"),r("ddb0"),r("3835")),s=r("5530"),l=r("2f62"),i=r("4220"),c=r("8cc6"),u=r("0514"),m=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{fluid:""}},[r("v-row",{staticClass:"d-flex flex-column"},[r("h2",[t._v("Market price")]),r("a",[t._v(t._s(t.marketAddress))])]),r("v-form",{ref:"form",attrs:{"lazy-validation":!0}},[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{value:t.price,label:"Market Price",type:"number"},on:{input:function(e){t.marketPrice=e}}})],1)],1),r("v-row",[r("v-btn",{staticClass:"success",on:{click:t.setPrice}},[t._v(" Set Price ")])],1)],1)],1)},d=[],p=(r("a9e3"),{name:"Price",data:function(){return{marketPrice:null}},props:{marketAddress:{type:String,required:!0},price:{type:Number,required:!0}},methods:{setPrice:function(){this.controller.setPrice(this.from,this.marketAddress,this.marketPrice)}},computed:Object(s["a"])({},Object(l["d"])({from:function(t){return{from:t.Session.account}}})),created:function(){this.controller=new i["a"]}}),v=p,f=r("2877"),h=r("6544"),k=r.n(h),y=r("8336"),b=r("62ad"),w=r("a523"),S=r("4bd4"),B=r("0fd9"),C=r("8654"),_=Object(f["a"])(v,m,d,!1,null,null,null),x=_.exports;k()(_,{VBtn:y["a"],VCol:b["a"],VContainer:w["a"],VForm:S["a"],VRow:B["a"],VTextField:C["a"]});var g=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",{staticClass:"SupplyForm ma-5",attrs:{"lazy-validation":!0,"max-width":"80%"}},[r("v-card-text",{staticClass:"pb-0"},[r("v-container",{attrs:{fluid:""}},[r("v-row",[r("h2",[t._v("Supply to market "+t._s(t.marketAddress)+" of token "+t._s(t.tokenSymbol))])]),r("v-row",[r("v-col",{staticClass:"pb-0"},[r("v-text-field",{attrs:{label:"Supply amount",type:"number",rules:[t.rules.required,t.rules.minBalance],required:""},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}})],1)],1)],1)],1),r("v-card-actions",{staticClass:"pl-6 pb-4 pt-0"},[r("v-btn",{attrs:{color:"success",disabled:!t.validForm},on:{click:t.supply}},[t._v(" Supply ")])],1)],1)},F=[],O={name:"SupplyForm",props:{marketAddress:{type:String,required:!0}},data:function(){var t=this;return{market:null,token:null,amount:null,tokenName:null,tokenSymbol:null,tokenBalance:null,validForm:!1,rules:{required:function(){return!!t.amount||"Required."},minBalance:function(){return t.tokenBalance>=t.amount||"Not enough funds"}}}},computed:Object(s["a"])({},Object(l["d"])({account:function(t){return t.Session.account},from:function(t){return{from:t.Session.account}},isOwner:function(t){return t.Session.isOwner}})),methods:{supply:function(){var t=this;this.token.approve(this.from,this.marketAddress,this.amount).then((function(){return t.market.supply(t.from,t.amount)})).then((function(){t.$emit("formSucceed")}))},getBalance:function(){var t=this;this.token.balanceOf(this.account).then((function(e){t.tokenBalance=Number(e)}))}},watch:{amount:function(){this.validForm="string"!==typeof this.rules.minBalance()&&"string"!==typeof this.rules.required()}},created:function(){var t=this;this.market=new c["a"](this.marketAddress),this.market.eventualTokenAddress.then((function(e){return t.token=new u["a"](e),[t.token.eventualName,t.token.eventualSymbol]})).then((function(t){return Promise.all(t)})).then((function(e){var r=Object(o["a"])(e,2),a=r[0],n=r[1];t.tokenName=a,t.tokenSymbol=n,t.getBalance()}))}},V=O,q=r("b0af"),A=r("99d9"),P=Object(f["a"])(V,g,F,!1,null,null,null),T=P.exports;k()(P,{VBtn:y["a"],VCard:q["a"],VCardActions:A["a"],VCardText:A["b"],VCol:b["a"],VContainer:w["a"],VRow:B["a"],VTextField:C["a"]});var R=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",{staticClass:"BorrowForm ma-5",attrs:{"lazy-validation":!0,"max-width":"80%"}},[r("v-card-text",{staticClass:"pb-0"},[r("v-container",{attrs:{fluid:""}},[r("v-row",[r("h2",[t._v("Borrow from market "+t._s(t.marketAddress)+" of token "+t._s(t.tokenSymbol))])]),r("v-row",[r("v-col",{staticClass:"pb-0"},[r("v-text-field",{attrs:{label:"Borrow amount",rules:[t.rules.required,t.rules.liquidity],type:"number",required:""},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}})],1)],1)],1)],1),r("v-card-actions",{staticClass:"pl-6 pb-4 pt-0"},[r("v-btn",{attrs:{disabled:!t.validForm,color:"success"},on:{click:t.borrow}},[t._v(" Borrow ")])],1)],1)},j=[],N={name:"BorrowForm",props:{marketAddress:{type:String,required:!0}},data:function(){var t=this;return{controller:null,market:null,marketPrice:null,amount:null,tokenName:null,tokenSymbol:null,liquidity:null,validForm:!1,rules:{required:function(){return!!t.amount||"Required."},liquidity:function(){return t.liquidity>=2*t.marketPrice*t.amount||"not enough liquidity"}}}},computed:Object(s["a"])({},Object(l["d"])({account:function(t){return t.Session.account},from:function(t){return{from:t.Session.account}},isOwner:function(t){return t.Session.isOwner}})),methods:{borrow:function(){var t=this;this.market.borrow(this.from,this.amount).then((function(){t.$emit("formSucceed")}))},getLiquidity:function(){var t=this;this.controller.getLiquidity(this.account).then((function(e){t.liquidity=e}))}},watch:{amount:function(){this.validForm="string"!==typeof this.rules.liquidity()&&"string"!==typeof this.rules.required()}},created:function(){var t=this;this.market=new c["a"](this.marketAddress),this.controller=new i["a"],this.market.eventualTokenAddress.then((function(t){var e=new u["a"](t);return[e.eventualName,e.eventualSymbol]})).then((function(t){return Promise.all(t)})).then((function(e){var r=Object(o["a"])(e,2),a=r[0],n=r[1];t.tokenName=a,t.tokenSymbol=n})),this.getLiquidity(),this.controller.getPrice(this.marketAddress).then((function(e){t.marketPrice=e}))}},M=N,$=Object(f["a"])(M,R,j,!1,null,null,null),E=$.exports;k()($,{VBtn:y["a"],VCard:q["a"],VCardActions:A["a"],VCardText:A["b"],VCol:b["a"],VContainer:w["a"],VRow:B["a"],VTextField:C["a"]});var z=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",{staticClass:"RedeemForm ma-5",attrs:{"lazy-validation":!0,"max-width":"80%"}},[r("v-card-text",{staticClass:"pb-0"},[r("v-container",{attrs:{fluid:""}},[r("v-row",[r("h2",[t._v("Redeem from market "+t._s(t.marketAddress)+" of token "+t._s(t.tokenSymbol))])]),r("v-row",[r("v-col",{staticClass:"pb-0"},[r("v-text-field",{attrs:{label:"Redeem amount",type:"number",rules:[t.rules.required,t.rules.marketSupply,t.rules.userSupply],required:""},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}})],1)],1)],1)],1),r("v-card-actions",{staticClass:"pl-6 pb-4 pt-0"},[r("v-btn",{attrs:{color:"success",disabled:!t.validForm},on:{click:t.redeem}},[t._v(" Redeem ")])],1)],1)},L=[],D={name:"RedeemForm",props:{marketAddress:{type:String,required:!0}},data:function(){var t=this;return{market:null,amount:null,tokenName:null,tokenSymbol:null,validForm:!1,marketSupply:null,userSupply:null,rules:{required:function(){return!!t.amount||"Required."},marketSupply:function(){return t.marketSupply>=t.amount||"Market does not have enough funds"},userSupply:function(){return t.userSupply>=t.amount||"You do not have enough funds on this market"}}}},computed:Object(s["a"])({},Object(l["d"])({account:function(t){return t.Session.account},from:function(t){return{from:t.Session.account}}})),methods:{redeem:function(){var t=this;this.market.redeem(this.from,this.amount).then((function(){return t.$emit("formSucceed")}))}},watch:{amount:function(){this.validForm="string"!==typeof this.rules.required()&&"string"!==typeof this.rules.marketSupply()&&"string"!==typeof this.rules.userSupply()}},created:function(){var t=this;this.market=new c["a"](this.marketAddress),this.market.eventualTokenAddress.then((function(t){var e=new u["a"](t);return[e.eventualName,e.eventualSymbol]})).then((function(t){return Promise.all(t)})).then((function(e){var r=Object(o["a"])(e,2),a=r[0],n=r[1];t.tokenName=a,t.tokenSymbol=n})),this.market.getSupplyOf(this.account).then((function(e){t.userSupply=Number(e)})),this.market.eventualTotalSupply.then((function(e){t.marketSupply=Number(e)}))}},J=D,I=Object(f["a"])(J,z,L,!1,null,null,null),Y=I.exports;k()(I,{VBtn:y["a"],VCard:q["a"],VCardActions:A["a"],VCardText:A["b"],VCol:b["a"],VContainer:w["a"],VRow:B["a"],VTextField:C["a"]});var G=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",{staticClass:"PayBorrowForm ma-5",attrs:{"lazy-validation":!0,"max-width":"80%"}},[r("v-card-text",{staticClass:"pb-0"},[r("v-container",{attrs:{fluid:""}},[r("v-row",[r("h2",[t._v("PayBorrow of market "+t._s(t.marketAddress)+" of token "+t._s(t.tokenSymbol))])]),r("v-row",[r("v-col",{staticClass:"pb-0"},[r("v-text-field",{attrs:{label:"Debt amount",type:"number",required:""},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}})],1)],1)],1)],1),r("v-card-actions",{staticClass:"pl-6 pb-4 pt-0"},[r("v-btn",{attrs:{color:"success"},on:{click:t.payBorrow}},[t._v(" Pay Debt ")])],1)],1)},H=[],K={name:"PayBorrowForm",props:{marketAddress:{type:String,required:!0}},data:function(){return{market:null,amount:null,token:null,tokenName:null,tokenSymbol:null}},computed:Object(s["a"])({},Object(l["d"])({account:function(t){return t.Session.account},from:function(t){return{from:t.Session.account}}})),methods:{payBorrow:function(){var t=this;this.token.approve(this.from,this.marketAddress,this.amount).then((function(){return t.market.payBorrow(t.from,t.amount)})).then((function(){t.$emit("formSucceed")}))}},created:function(){var t=this;this.market=new c["a"](this.marketAddress),this.market.eventualTokenAddress.then((function(e){return t.token=new u["a"](e),[t.token.eventualName,t.token.eventualSymbol]})).then((function(t){return Promise.all(t)})).then((function(e){var r=Object(o["a"])(e,2),a=r[0],n=r[1];t.tokenName=a,t.tokenSymbol=n}))}},Q=K,U=Object(f["a"])(Q,G,H,!1,null,null,null),W=U.exports;k()(U,{VBtn:y["a"],VCard:q["a"],VCardActions:A["a"],VCardText:A["b"],VCol:b["a"],VContainer:w["a"],VRow:B["a"],VTextField:C["a"]});var X={name:"Market",props:{id:{type:String,required:!0}},data:function(){return{controller:null,price:null,market:null,token:null,totalSupply:null,totalBorrows:null,tokenName:null,tokenSymbol:null,btc:"https://www.coinopsy.com/media/img/quality_logo/bitcoin-btc.png",tokenBalanceOf:null,supplyOf:null,borrowBy:null,baseBorrowRate:null,actionForm:null}},computed:Object(s["a"])({},Object(l["d"])({account:function(t){return t.Session.account},from:function(t){return{from:t.Session.account}},isOwner:function(t){return t.Session.isOwner}})),methods:{reset:function(){this.actionForm=null,this.loadMarketTotalSupply(),this.loadMarketTotalBorrows(),this.loadMarketSupplyOf(),this.loadMarketBorrowBy(),this.loadTokenBalanceOf()},showSupplyForm:function(){this.actionForm="SupplyForm"},showBorrowForm:function(){this.actionForm="BorrowForm"},showRedeemForm:function(){this.actionForm="RedeemForm"},showPayBorrowForm:function(){this.actionForm="PayBorrowForm"},loadTokenBalanceOf:function(){var t=this;this.token.balanceOf(this.account).then((function(e){t.tokenBalanceOf=e}))},loadMarketTotalSupply:function(){var t=this;this.market.eventualTotalSupply.then((function(e){t.totalSupply=e}))},loadMarketTotalBorrows:function(){var t=this;this.market.eventualTotalBorrows.then((function(e){t.totalBorrows=e}))},loadMarketSupplyOf:function(){var t=this;this.market.getSupplyOf(this.account).then((function(e){t.supplyOf=e}))},loadMarketBorrowBy:function(){var t=this;this.market.getBorrowBy(this.account).then((function(e){t.borrowBy=e}))},loadMarketBaseBorrowRate:function(){var t=this;this.market.eventualBaseBorrowRate.then((function(e){t.baseBorrowRate=e}))}},components:{Price:x,SupplyForm:T,BorrowForm:E,RedeemForm:Y,PayBorrowForm:W},created:function(){var t=this;this.controller=new i["a"],this.market=new c["a"](this.id),this.market.eventualTokenAddress.then((function(e){return t.token=new u["a"](e),[t.token.eventualName,t.token.eventualSymbol]})).then((function(t){return Promise.all(t)})).then((function(e){var r=Object(o["a"])(e,2),a=r[0],n=r[1];t.tokenName=a,t.tokenSymbol=n,t.loadTokenBalanceOf()})),this.controller.getPrice(this.id).then((function(e){t.price=e})),this.loadMarketTotalSupply(),this.loadMarketTotalBorrows(),this.loadMarketSupplyOf(),this.loadMarketBorrowBy(),this.loadMarketBaseBorrowRate()}},Z=X,tt=r("adda"),et=Object(f["a"])(Z,a,n,!1,null,null,null);e["default"]=et.exports;k()(et,{VBtn:y["a"],VCard:q["a"],VCardActions:A["a"],VCardText:A["b"],VCol:b["a"],VImg:tt["a"],VRow:B["a"]})}}]);
//# sourceMappingURL=market.df791e91.js.map